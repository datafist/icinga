/*
 * Host und Service Templates
 * 
 * Templates definieren gemeinsame Einstellungen für Hosts und Services.
 * Nutze diese Templates in hosts.conf mit: import "template-name"
 * 
 * HINWEIS: Die Standard-Templates "generic-host" und "generic-service"
 *          werden aus der Icinga Template Library (ITL) geladen.
 *          Wir definieren hier nur zusätzliche, spezifische Templates.
 */

/* ============================================
 * GLOBALE THRESHOLD DEFAULTS
 * ============================================
 * 
 * Diese Konstanten definieren die globalen Default-Werte für
 * Warning und Critical Thresholds. Sie können auf Host-Ebene
 * überschrieben werden via host.vars.X
 * 
 * Konsistent mit Director Data Fields!
 */

const ThresholdDefaults = {
  /* Disk Usage (in %) */
  disk_warning = 80
  disk_critical = 90
  
  /* System Load (1min, 5min, 15min) */
  load_warning = "5,4,3"
  load_critical = "10,8,6"
  
  /* Memory Usage (in %) */
  memory_warning = 80
  memory_critical = 90
  
  /* Swap Usage (in %) */
  swap_warning = 50
  swap_critical = 80
  
  /* Process Count */
  procs_warning = 250
  procs_critical = 400
  
  /* Users logged in */
  users_warning = 5
  users_critical = 10
  
  /* Ping RTT (in ms) */
  ping_wrta = 100
  ping_crta = 500
  ping_wpl = 5
  ping_cpl = 10
  
  /* HTTP Response Time (in s) */
  http_warn_time = 5
  http_critical_time = 15
  
  /* TCP Connection Timeout (in s) */
  tcp_timeout = 10
}

/* ============================================
 * USER TEMPLATES (für Benachrichtigungen)
 * ============================================ */

template User "generic-user" {
  /* Default: Alle States und Notification Types */
}

/* ============================================
 * SERVICE TEMPLATES
 * ============================================ */

/* Kritische Services - häufigere Checks */
template Service "critical-service" {
  import "generic-service"
  max_check_attempts = 2
  check_interval = 30s
  retry_interval = 10s
}

/* Low-Frequency Services - seltene Checks (z.B. Uptime) */
template Service "lowfreq-service" {
  import "generic-service"
  check_interval = 5m
  retry_interval = 1m
}

/* ============================================
 * HOST TEMPLATES - BETRIEBSSYSTEME
 * ============================================ */

/* Linux Server/Workstation */
template Host "linux-host" {
  import "generic-host"
  vars.os = "Linux"
  
  /* Default Thresholds (überschreibbar auf Host-Ebene) */
  vars.disk_warning = ThresholdDefaults.disk_warning
  vars.disk_critical = ThresholdDefaults.disk_critical
  vars.load_warning = ThresholdDefaults.load_warning
  vars.load_critical = ThresholdDefaults.load_critical
  vars.memory_warning = ThresholdDefaults.memory_warning
  vars.memory_critical = ThresholdDefaults.memory_critical
  vars.swap_warning = ThresholdDefaults.swap_warning
  vars.swap_critical = ThresholdDefaults.swap_critical
  vars.procs_warning = ThresholdDefaults.procs_warning
  vars.procs_critical = ThresholdDefaults.procs_critical
  vars.users_warning = ThresholdDefaults.users_warning
  vars.users_critical = ThresholdDefaults.users_critical
  
  vars.notification["mail"] = {
    groups = [ "icingaadmins" ]
  }
}

/* Windows ohne SNMP */
template Host "windows-host" {
  import "generic-host"
  vars.os = "Windows"
  
  /* Default Thresholds */
  vars.disk_warning = ThresholdDefaults.disk_warning
  vars.disk_critical = ThresholdDefaults.disk_critical
  vars.memory_warning = ThresholdDefaults.memory_warning
  vars.memory_critical = ThresholdDefaults.memory_critical
  vars.procs_warning = ThresholdDefaults.procs_warning
  vars.procs_critical = ThresholdDefaults.procs_critical
  
  vars.notification["mail"] = {
    groups = [ "icingaadmins" ]
  }
}

/* Windows mit SNMP-Monitoring */
template Host "windows-snmp-host" {
  import "windows-host"
  vars.snmp_community = "public"
  vars.snmp_version = "2c"
}

/* ============================================
 * HOST TEMPLATES - NETZWERKGERÄTE
 * ============================================ */

/* Generisches Netzwerkgerät (Switch, Router) */
template Host "network-device" {
  import "generic-host"
  vars.os = "Network"
  vars.snmp_community = "public"
  vars.snmp_version = "2c"
  
  vars.notification["mail"] = {
    groups = [ "icingaadmins" ]
  }
}

/* ============================================
 * HOST TEMPLATES - VIDEO/STREAMING
 * ============================================ */

/* Pearl Epiphan Video Capture */
template Host "epiphan-device" {
  import "generic-host"
  vars.device_type = "epiphan"
  vars.epiphan_api = true
  
  vars.notification["mail"] = {
    groups = [ "icingaadmins" ]
  }
}

/* ============================================
 * HOST TEMPLATES - AUDIO
 * ============================================ */

/* Generisches Audio-Gerät */
template Host "audio-device" {
  import "generic-host"
  vars.device_type = "audio"
  
  vars.notification["mail"] = {
    groups = [ "icingaadmins" ]
  }
}

/* Dante/AES67 Audio-Netzwerk */
template Host "dante-device" {
  import "generic-host"
  vars.device_type = "audio"
  vars.dante = true
  vars.http_check = true
  
  vars.notification["mail"] = {
    groups = [ "icingaadmins" ]
  }
}

/* ============================================
 * HOST TEMPLATES - MIKROFONE
 * ============================================ */

/* Wireless Microphone System (Shure, Sennheiser) */
template Host "wireless-microphone" {
  import "generic-host"
  vars.device_type = "microphone"
  vars.snmp_community = "public"
  vars.snmp_version = "2c"
  
  vars.notification["mail"] = {
    groups = [ "icingaadmins" ]
  }
}
