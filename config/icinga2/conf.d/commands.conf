/*
 * Custom Check Commands
 * 
 * Hier werden NUR benutzerdefinierte Kommandos definiert.
 * 
 * BEREITS IN ICINGA2 EINGEBAUT (NICHT HIER DEFINIEREN):
 *   - ping4, ping6, hostalive
 *   - http, tcp, udp, ssh, ftp, smtp, dns
 *   - disk, load, procs, swap, users
 *   - snmp, snmp-uptime, snmp-interface
 *   - nscp-local-service
 * 
 * Siehe: /usr/share/icinga2/include/command-plugins.conf
 */

/* ============================================
 * WINDOWS SNMP KOMMANDOS
 * ============================================ */

/* Windows CPU via SNMP */
object CheckCommand "windows-snmp-cpu" {
  import "snmp"
  
  vars.snmp_oid = ".1.3.6.1.2.1.25.3.3.1.2.1"
  vars.snmp_label = "CPU Load"
  vars.snmp_units = "%"
  vars.snmp_warn = "80"
  vars.snmp_crit = "95"
}

/* Windows Memory via SNMP */
object CheckCommand "windows-snmp-memory" {
  import "snmp"
  
  vars.snmp_oid = ".1.3.6.1.2.1.25.2.2.0"
  vars.snmp_label = "Memory"
}

/* ============================================
 * PEARL EPIPHAN KOMMANDOS
 * ============================================ */

/* Epiphan API Status Check */
object CheckCommand "epiphan-api-status" {
  import "http"
  
  vars.http_uri = "/api/system/status"
  vars.http_string = "ok"
  vars.http_warn_time = 5
  vars.http_critical_time = 15
  vars.http_header = "Accept: application/json"
}

/* Epiphan Channel Status */
object CheckCommand "epiphan-channel" {
  import "http"
  
  vars.http_uri = "/api/channels/$epiphan_channel$/status"
  vars.http_warn_time = 5
  vars.http_critical_time = 15
  vars.http_header = "Accept: application/json"
}

/* Epiphan Recorder Status */
object CheckCommand "epiphan-recorder" {
  import "http"
  
  vars.http_uri = "/api/recorders"
  vars.http_warn_time = 5
  vars.http_critical_time = 15
  vars.http_header = "Accept: application/json"
}

/* ============================================
 * AUDIO/DANTE KOMMANDOS
 * ============================================ */

/* Dante Network Check (Port 4440) */
object CheckCommand "dante-network" {
  import "tcp"
  
  vars.tcp_port = 4440
  vars.tcp_warn_time = 2
  vars.tcp_critical_time = 5
}

/* ============================================
 * WIRELESS MICROPHONE KOMMANDOS
 * ============================================ */

/* Shure Battery Level via SNMP */
object CheckCommand "shure-battery" {
  import "snmp"
  
  vars.snmp_oid = "$shure_battery_oid$"
  vars.snmp_label = "Battery Level"
  vars.snmp_units = "%"
  vars.snmp_warn = "$battery_warn$:"
  vars.snmp_crit = "$battery_crit$:"
  vars.battery_warn = 30
  vars.battery_crit = 15
}

/* RF Signal Quality via SNMP */
object CheckCommand "rf-signal" {
  import "snmp"
  
  vars.snmp_oid = "$mic_rf_oid$"
  vars.snmp_label = "RF Signal"
  vars.snmp_warn = "$rf_warn$:"
  vars.snmp_crit = "$rf_crit$:"
  vars.rf_warn = 50
  vars.rf_crit = 30
}
